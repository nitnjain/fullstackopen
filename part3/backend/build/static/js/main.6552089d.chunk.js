(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var r=t(17),c=t.n(r),a=t(8),o=t(3),u=t(2),i=t(4),s=t.n(i),d="/api/persons",l={getAll:function(){return s.a.get(d).then((function(e){return e.data}))},add:function(e){return s.a.post(d,e).then((function(e){return e.data}))},update:function(e,n){return s.a.put("".concat(d,"/").concat(n),e).then((function(e){return e.data}))},remove:function(e){return s.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))}},h=t(0),b=function(e){var n=e.msg;if(null===n)return null;var t={color:"#eee",backgroundColor:"s"===n.type?"green":"red",fontSize:25,padding:5};return Object(h.jsx)("div",{style:t,children:n.msg})},j=function(e){var n=e.search,t=e.handleSearchChange;return Object(h.jsxs)("div",{children:["Search: ",Object(h.jsx)("input",{value:n,onChange:t})]})},f=function(e){return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{onSubmit:e.addName,children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:e.newName,onChange:e.handleNameChange}),Object(h.jsx)("br",{}),"number: ",Object(h.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})})},m=function(e){var n=e.persons,t=e.removePerson;return Object(h.jsx)("div",{children:Object(h.jsx)("ul",{children:n.map((function(e){return Object(h.jsxs)("li",{children:[e.name," - ",e.number," ",Object(h.jsx)("button",{onClick:function(){return t(e.id)},children:"delete"})]},e.id)}))})})},p=function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(u.useState)(""),i=Object(o.a)(c,2),s=i[0],d=i[1],p=Object(u.useState)(""),O=Object(o.a)(p,2),v=O[0],g=O[1],x=Object(u.useState)(""),w=Object(o.a)(x,2),y=w[0],C=w[1],k=Object(u.useState)(null),N=Object(o.a)(k,2),S=N[0],I=N[1];Object(u.useEffect)((function(){l.getAll().then((function(e){r(e)}))}),[]);var L=t.filter((function(e){return e.name.match(new RegExp(y,"i"))}));return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(b,{msg:S}),Object(h.jsx)("br",{}),Object(h.jsx)(j,{search:y,handleSearchChange:function(e){C(e.target.value)}}),Object(h.jsx)("h3",{children:"Add New"}),Object(h.jsx)(f,{addName:function(e){if(e.preventDefault(),t.some((function(e){return e.name.toLowerCase()===s.toLowerCase()}))){if(window.confirm("".concat(s," already exists in the phonebook, do you want to update their number?"))){var n=t.find((function(e){return e.name.toLowerCase()===s.toLowerCase()})),c=Object(a.a)(Object(a.a)({},n),{},{number:v});l.update(c,n.id).then((function(e){r(t.map((function(t){return t.id===n.id?e:t}))),I({msg:"".concat(c.name,"'s number has been updated in the phonebook"),type:"s"}),setInterval((function(){I(null)}),5e3)})).catch((function(e){I({msg:e.response.data.error,type:"e"}),setInterval((function(){I(null)}),5e3)}))}return g(""),d(""),null}var o={name:s,number:v};l.add(o).then((function(e){r(t.concat(e)),I({msg:"".concat(e.name," has been added to the phonebook"),type:"s"}),setInterval((function(){I(null)}),5e3)})).catch((function(e){I({msg:e.response.data.error,type:"e"}),setInterval((function(){I(null)}),5e3)})),g(""),d("")},newName:s,newNumber:v,handleNameChange:function(e){d(e.target.value)},handleNumberChange:function(e){g(e.target.value)}}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(m,{persons:L,removePerson:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Do yo want to delete ".concat(n.name))&&l.remove(e).then((function(){r(t.filter((function(n){return n.id!==e}))),I({msg:"Successfully removed from the phonebook",type:"s"}),setInterval((function(){I(null)}),5e3)})).catch((function(){I({msg:"The contact has already been removed from the phonebook",type:"e"}),setInterval((function(){I(null)}),5e3)}))}})]})};c.a.render(Object(h.jsx)(p,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.6552089d.chunk.js.map